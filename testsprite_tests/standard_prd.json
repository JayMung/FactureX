{
  "meta": {
    "project": "CoxiPay",
    "date": "2025-10-20",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "CoxiPay is a comprehensive web platform designed to manage international money transfers and commercial transactions, primarily between Africa and China. It centralizes client management, financial transactions, invoice generation, activity tracking, and includes a granular user permissions system to streamline and secure cross-border business operations.",
  "core_goals": [
    "Centralize management of clients and their financial transactions",
    "Automate invoice and quotation creation including transportation fee calculations",
    "Ensure full traceability of all operations with detailed activity logging",
    "Provide a multi-user permission system with roles and granular module access",
    "Deliver real-time analytics and reporting dashboards to aid decision making"
  ],
  "key_features": [
    "User authentication and session management with Supabase integration",
    "Client management with create, read, update, delete (CRUD) operations and history tracking",
    "Transaction management supporting multiple currencies (USD, CDF, CNY) and status workflows",
    "Invoice and quotation management with automatic numbering, conversion, and PDF generation",
    "Real-time analytics dashboard featuring statistics, charts, and recent activity",
    "Role-based permissions and access control with client and server-side enforcement",
    "Comprehensive settings module including company info, payment methods, exchange rates, and transaction fees",
    "Bulk operations for records such as multi-delete and export",
    "CSV import tools for clients and transactions with duplicate detection",
    "Activity logging and notification center for system event tracking",
    "Responsive design with header and sidebar navigation",
    "Reusable UI components based on shadcn/ui and styled with Tailwind CSS"
  ],
  "user_flow_summary": [
    "User logs in via secure authentication and lands on the real-time analytics dashboard",
    "Operator searches for or creates a client, then logs a transaction selecting currency and payment mode",
    "Operator validates transactions to change their status and updates client history automatically",
    "Administrator configures system settings including exchange rates, transaction fees, and user permissions",
    "Users create and edit invoices and quotations, add product lines, generate PDFs, and convert quotations to invoices",
    "Users with admin rights monitor activity logs and manage user accounts and permissions"
  ],
  "validation_criteria": [
    "All forms must have client-side validation using react-hook-form and zod schemas",
    "Permission guards enforce UI and route access based on user roles and permissions",
    "Transactions calculate fees, benefits, and currency conversions automatically according to current settings",
    "Invoices are numbered uniquely per day and PDF exports include all required company and client data",
    "Activity logs capture all CRUD actions with user and timestamp metadata",
    "Data imports handle duplicates and generate reports for validation",
    "System maintains RLS and access control policies server-side with Supabase integration",
    "Performance optimizations such as caching, pagination, and lazy loading are implemented and verified"
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Vite",
      "Tailwind CSS",
      "shadcn/ui",
      "Supabase",
      "TanStack Query",
      "React Router v6",
      "Zod",
      "React Hook Form"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "User authentication with Supabase, admin setup, login/logout, protected routes, and permission-based access control",
        "files": [
          "src/components/auth/AuthProvider.tsx",
          "src/components/auth/ProtectedRoute.tsx",
          "src/components/auth/ProtectedRouteEnhanced.tsx",
          "src/components/auth/PermissionGuard.tsx",
          "src/contexts/AuthContext.tsx",
          "src/integrations/supabase/auth.ts",
          "src/pages/Login.tsx",
          "src/pages/AdminSetup.tsx"
        ]
      },
      {
        "name": "Client Management",
        "description": "Create, read, update, and delete client records with client history tracking and facture association",
        "files": [
          "src/pages/Clients-Protected.tsx",
          "src/components/forms/ClientForm.tsx",
          "src/components/clients/ClientFacturesTab.tsx",
          "src/components/clients/ClientHistoryModal.tsx",
          "src/hooks/useClients.ts",
          "src/hooks/useClientHistory.ts"
        ]
      },
      {
        "name": "Transaction Management",
        "description": "USD/CDF currency transfer management with automatic exchange rates and transaction tracking",
        "files": [
          "src/pages/Transactions-Protected.tsx",
          "src/components/forms/TransactionForm.tsx",
          "src/components/modals/TransactionDetailsModal.tsx",
          "src/components/charts/TransactionChart.tsx",
          "src/hooks/useTransactions.ts"
        ]
      },
      {
        "name": "Invoice (Facture) Management",
        "description": "Create, edit, and manage invoices with PDF generation capabilities",
        "files": [
          "src/pages/Factures-Protected.tsx",
          "src/pages/Factures-Create.tsx",
          "src/components/forms/FactureForm.tsx",
          "src/components/modals/FactureDetailsModal.tsx",
          "src/hooks/useFactures.ts",
          "src/utils/pdfGenerator.ts",
          "src/utils/pdfGeneratorHTML.ts"
        ]
      },
      {
        "name": "Dashboard & Analytics",
        "description": "Real-time analytics dashboard with statistics, charts, and activity monitoring",
        "files": [
          "src/pages/Index-Protected.tsx",
          "src/components/dashboard/AdvancedDashboard.tsx",
          "src/components/dashboard/StatCard.tsx",
          "src/components/dashboard/TopActiveUsers.tsx",
          "src/hooks/useDashboard.ts",
          "src/hooks/useDashboardAnalytics.ts",
          "src/hooks/useDashboardWithPermissions.ts"
        ]
      },
      {
        "name": "Activity Logging System",
        "description": "Track and display all system activities with real-time updates and detailed logs",
        "files": [
          "src/pages/ActivityLogs.tsx",
          "src/components/activity/ActivityFeed.tsx",
          "src/components/activity/ActivityChart.tsx",
          "src/components/activity/ActivityStats.tsx",
          "src/components/activity/ActivityDetailsModal.tsx",
          "src/components/activity/NotificationCenter.tsx",
          "src/hooks/useActivityLogs.ts",
          "src/hooks/useRealTimeActivity.ts",
          "src/services/activityLogger.ts"
        ]
      },
      {
        "name": "Permissions & Role Management",
        "description": "User role and permission system with admin/operator distinctions",
        "files": [
          "src/pages/Settings-Permissions.tsx",
          "src/components/permissions/PermissionsManager.tsx",
          "src/services/permissionsService.ts",
          "src/hooks/useUserProfiles.ts"
        ]
      },
      {
        "name": "Settings Management",
        "description": "System settings, company information, payment methods, and notification preferences",
        "files": [
          "src/pages/Settings.tsx",
          "src/pages/Settings-Facture.tsx",
          "src/pages/NotificationSettings.tsx",
          "src/components/settings/CompanySettings.tsx",
          "src/components/forms/PaymentMethodForm.tsx",
          "src/hooks/useSettings.ts",
          "src/hooks/usePaymentMethods.ts",
          "src/hooks/useNotificationPreferences.ts"
        ]
      },
      {
        "name": "Data Import System",
        "description": "CSV import functionality for clients and transactions with duplicate detection",
        "files": [
          "src/components/import/CSVImporter.tsx",
          "src/components/import/ClientsImporter.tsx",
          "src/components/import/TransactionsImporter.tsx",
          "src/components/import/import-report.tsx",
          "src/components/duplicates/duplicate-detector.tsx"
        ]
      },
      {
        "name": "Bulk Operations",
        "description": "Batch operations for multiple records including delete, export, and status updates",
        "files": [
          "src/components/ui/bulk-actions.tsx",
          "src/components/ui/advanced-bulk-actions.tsx",
          "src/hooks/useBulkOperations.ts",
          "src/hooks/useExtendedBulkOperations.ts"
        ]
      },
      {
        "name": "Filtering & Search",
        "description": "Advanced filtering capabilities for data tables and search functionality",
        "files": [
          "src/components/filters/AdvancedFilters.tsx",
          "src/components/ui/sortable-header.tsx",
          "src/components/ui/pagination-custom.tsx"
        ]
      },
      {
        "name": "Layout & Navigation",
        "description": "Application layout with header, sidebar navigation, and responsive design",
        "files": [
          "src/components/layout/Layout.tsx",
          "src/components/layout/Header.tsx",
          "src/components/layout/Sidebar.tsx",
          "src/components/ui/settings-sidebar.tsx"
        ]
      },
      {
        "name": "Supabase Integration",
        "description": "Database operations, real-time subscriptions, and authentication through Supabase",
        "files": [
          "src/integrations/supabase/client.ts",
          "src/services/supabase.ts",
          "src/services/supabase-extended.ts"
        ]
      },
      {
        "name": "UI Components Library",
        "description": "Reusable UI components based on shadcn/ui with custom styling",
        "files": [
          "src/components/ui/button.tsx",
          "src/components/ui/input.tsx",
          "src/components/ui/dialog.tsx",
          "src/components/ui/table.tsx",
          "src/components/ui/card.tsx",
          "src/components/ui/form.tsx",
          "src/components/ui/select.tsx",
          "src/components/ui/toast.tsx",
          "src/components/ui/alert-dialog.tsx",
          "src/components/ui/badge.tsx",
          "src/components/ui/calendar.tsx",
          "src/components/ui/checkbox.tsx",
          "src/components/ui/dropdown-menu.tsx"
        ]
      }
    ]
  }
}
