{
  "meta": {
    "project": "CoxiPay",
    "date": "2025-10-20",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "CoxiPay is a comprehensive web application platform enabling businesses involved in international money transfers and trade to efficiently manage clients, transactions, invoices, and activities with a robust and secure role-based permission system.",
  "core_goals": [
    "Centralize client and transaction management to streamline financial operations",
    "Automate invoicing and quotation creation with precise transport fee calculations",
    "Ensure complete traceability and auditing of all operations via real-time logs and activity feeds",
    "Provide granular multi-user permission controls with role-based access",
    "Deliver real-time dashboards and analytics to monitor business performance"
  ],
  "key_features": [
    "Robust Authentication and Authorization using Supabase with role and permission management",
    "Dynamic Dashboard with real-time statistics, charts, activity feed, and quick actions",
    "Full CRUD client management with history tracking, bulk actions, and CSV import/export capabilities",
    "Comprehensive transaction management supporting multiple currencies (USD, CDF, CNY), filtering, sorting, and validation workflows",
    "Invoice and Quotation management featuring auto-numbering, PDF exports, detailed line items, and transport fee calculations",
    "Granular Settings management including company info, exchange rates, payment methods, and user permissions",
    "Advanced activity logging with filters, detailed action records, and notification center",
    "Bulk operations for clients and transactions including export, deletion, and status updates",
    "CSV import/export with validation and duplicate detection for client and transaction data",
    "Reusable UI components based on Shadcn UI and Radix UI for consistent design and responsiveness"
  ],
  "user_flow_summary": [
    "User authentication flow with secure login, session management, and initial admin setup",
    "Operator daily workflow: client search/creation, transaction entry and validation, end of day statistics review",
    "Invoice workflow: create or edit invoice/quotation with item line management, automatic calculations, PDF generation, and conversion of quotation to invoice",
    "Administrator workflow: initial configuration, user and permission management, settings updates, and monitoring activity logs"
  ],
  "validation_criteria": [
    "All CRUD operations must check user permissions and enforce row-level security policies",
    "Form inputs validate client-side and server-side with react-hook-form and Zod schemas",
    "Transactions marked \"Servi\" are locked from modification or deletion",
    "Invoice numbering follows strict unique auto-incrementing daily format",
    "CSV imports validate data integrity and report errors clearly, preventing duplicates",
    "Activity logs capture all critical user actions with precise timestamps and details",
    "Real-time dashboards reflect up-to-date data queried with efficient caching and pagination"
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Vite",
      "React Router",
      "TanStack Query",
      "Supabase",
      "Tailwind CSS",
      "Shadcn UI",
      "Radix UI",
      "Zod",
      "React Hook Form"
    ],
    "features": [
      {
        "name": "Authentication & Authorization",
        "description": "User authentication with Supabase, protected routes, permission-based access control, and role management",
        "files": [
          "src/components/auth/AuthProvider.tsx",
          "src/components/auth/ProtectedRoute.tsx",
          "src/components/auth/ProtectedRouteEnhanced.tsx",
          "src/components/auth/PermissionGuard.tsx",
          "src/integrations/supabase/auth.ts",
          "src/integrations/supabase/client.ts",
          "src/hooks/usePermissions.ts",
          "src/pages/Login.tsx",
          "src/pages/AdminSetup.tsx"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Main dashboard with statistics, analytics, real-time activity feed, transaction charts, and quick actions",
        "files": [
          "src/pages/Index-Protected.tsx",
          "src/components/dashboard/AdvancedDashboard.tsx",
          "src/components/dashboard/StatCard.tsx",
          "src/components/dashboard/TopActiveUsers.tsx",
          "src/hooks/useDashboard.ts",
          "src/hooks/useDashboardAnalytics.ts",
          "src/hooks/useDashboardWithPermissions.ts"
        ]
      },
      {
        "name": "Client Management",
        "description": "CRUD operations for clients, client history tracking, bulk operations, CSV import, and client invoices",
        "files": [
          "src/pages/Clients-Protected.tsx",
          "src/components/forms/ClientForm.tsx",
          "src/components/clients/ClientHistoryModal.tsx",
          "src/components/clients/ClientFacturesTab.tsx",
          "src/components/import/ClientsImporter.tsx",
          "src/hooks/useClients.ts",
          "src/hooks/useClientHistory.ts"
        ]
      },
      {
        "name": "Transaction Management",
        "description": "USD/CDF money transfer transactions with CRUD operations, filtering, sorting, bulk actions, CSV import, and transaction details",
        "files": [
          "src/pages/Transactions-Protected.tsx",
          "src/components/forms/TransactionForm.tsx",
          "src/components/modals/TransactionDetailsModal.tsx",
          "src/components/charts/TransactionChart.tsx",
          "src/components/import/TransactionsImporter.tsx",
          "src/hooks/useTransactions.ts"
        ]
      },
      {
        "name": "Invoice Management (Factures)",
        "description": "Invoice creation, editing, viewing with PDF export, status management, and client assignment",
        "files": [
          "src/pages/Factures-Protected.tsx",
          "src/pages/Factures-Create.tsx",
          "src/components/forms/FactureForm.tsx",
          "src/components/modals/FactureDetailsModal.tsx",
          "src/hooks/useFactures.ts"
        ]
      },
      {
        "name": "Activity Logging",
        "description": "Real-time activity tracking, activity feed, notification center, and activity analytics",
        "files": [
          "src/pages/ActivityLogs.tsx",
          "src/components/activity/ActivityFeed.tsx",
          "src/components/activity/ActivityChart.tsx",
          "src/components/activity/ActivityStats.tsx",
          "src/components/activity/ActivityDetailsModal.tsx",
          "src/components/activity/NotificationCenter.tsx",
          "src/hooks/useActivityLogs.ts",
          "src/hooks/useRealTimeActivity.ts",
          "src/hooks/useNotificationPreferences.ts"
        ]
      },
      {
        "name": "Settings & Configuration",
        "description": "Company settings, payment methods, user permissions management, and notification preferences",
        "files": [
          "src/pages/Settings.tsx",
          "src/pages/Settings-Permissions.tsx",
          "src/pages/Settings-Facture.tsx",
          "src/pages/NotificationSettings.tsx",
          "src/components/settings/CompanySettings.tsx",
          "src/components/forms/PaymentMethodForm.tsx",
          "src/components/permissions/PermissionsManager.tsx",
          "src/hooks/useSettings.ts",
          "src/hooks/usePaymentMethods.ts",
          "src/hooks/useUserProfiles.ts"
        ]
      },
      {
        "name": "Bulk Operations",
        "description": "Advanced bulk actions for clients and transactions including export, delete, and status updates",
        "files": [
          "src/components/ui/bulk-actions.tsx",
          "src/components/ui/advanced-bulk-actions.tsx",
          "src/hooks/useBulkOperations.ts",
          "src/hooks/useExtendedBulkOperations.ts",
          "src/hooks/useExtendedSelection.ts"
        ]
      },
      {
        "name": "CSV Import/Export",
        "description": "Import clients and transactions from CSV files with validation and error reporting",
        "files": [
          "src/components/import/CSVImporter.tsx",
          "src/components/import/ClientsImporter.tsx",
          "src/components/import/TransactionsImporter.tsx",
          "src/components/import/import-report.tsx"
        ]
      },
      {
        "name": "Duplicate Detection",
        "description": "Automated detection of duplicate records in clients and transactions",
        "files": [
          "src/components/duplicates/duplicate-detector.tsx"
        ]
      },
      {
        "name": "Advanced Filtering & Sorting",
        "description": "Multi-criteria filtering and sorting for data tables",
        "files": [
          "src/components/filters/AdvancedFilters.tsx",
          "src/hooks/useSorting.ts"
        ]
      },
      {
        "name": "Layout & Navigation",
        "description": "Application layout with header, sidebar navigation, and responsive design",
        "files": [
          "src/components/layout/Layout.tsx",
          "src/components/layout/Header.tsx",
          "src/components/layout/Sidebar.tsx"
        ]
      },
      {
        "name": "UI Components Library",
        "description": "Reusable UI components based on Shadcn UI and Radix UI for consistent design",
        "files": [
          "src/components/ui/button.tsx",
          "src/components/ui/card.tsx",
          "src/components/ui/dialog.tsx",
          "src/components/ui/table.tsx",
          "src/components/ui/form.tsx",
          "src/components/ui/input.tsx",
          "src/components/ui/select.tsx",
          "src/components/ui/toast.tsx",
          "src/components/ui/alert.tsx",
          "src/components/ui/badge.tsx"
        ]
      }
    ]
  }
}
